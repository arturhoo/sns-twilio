<!doctype html>
<html>
  <head>
    <title>Topic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ url_for('static', filename='bootstrap.min.css') }}" rel="stylesheet"  media="screen">
  </head>

  <body>
    <div class="container">
      <h2>{{ topic.arn }}</h2>
        <p><a href="{{ topic.confirmation_url }}" target="_blank">Confirmation URL</a></p>

        <div class="row">
          <div class="col-6 col-sm-6 col-lg-6">
            <h3>Messages Feed</h3>
            Messages go here!
          </div>
          <div class="col-6 col-sm-6 col-lg-6">
            <h3>Users</h3>

              {% if topic.users.all() %}
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>Email</th>
                      <th>Telephone</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for user in topic.users %}
                      <tr>
                        <td>{{ user.email }}</td>
                        <td>{{ user.telephone }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% else %}
                <p>No users subscribed to this topic</p>
              {% endif %}

            <h3>Add User</h3>

            <form method=post action="{{ url_for('show_topic', topic_arn=topic.arn) }}">
              <fieldset>
                <div class="form-group">
                  <label for="email">Email address</label>
                  <input type="text" class="form-control" id="email" name="email" placeholder="Enter email">
                </div>
                <div class="form-group">
                  <label for="telephone">Mobile phone number</label>
                  <input type="text" class="form-control" id="telephone" name="telephone" placeholder="Enter mobile number">
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
              </fieldset>
            </form>
          </div>

        </div>

    </div>
  </body>
  <footer style="text-align: center;">
    <hr>
    <div class="container">
      <a href="{{ url_for('topics') }}">Main</a>
    </div>
  </footer>
</html>
